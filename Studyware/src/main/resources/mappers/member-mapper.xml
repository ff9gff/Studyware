<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="edu.spring.studyware.MemberMapper"> 
	<select id="memberRegion1" resultType="edu.spring.studyware.domain.RegionVO">
		select distinct depth1 from sw_region
	</select>
	
	<select id="memberRegion2" resultType="edu.spring.studyware.domain.RegionVO">
		select depth2 from sw_region where depth1 = #{depth1}
	</select>
	
	<select id="memberRegionNo" resultType="Integer">
		select region_no from sw_region where depth2 = #{depth2}
	</select>
	
	<insert id="memberSignUp">
		insert into sw_member (member_no, id, pwd, name, nick, phone, email, region_no)
		values (#{member_no}, #{id}, #{pwd}, #{name}, #{nick}, #{phone}, #{email}, #{region_no})
	</insert>
	
	<!-- 관리자 : 회원목록 select  -->
	<select id="memberDTOList"
			resultType="edu.spring.studyware.domain.MemberDTO">
		select m.member_no, m.id, m.name, m.nick, m.phone, m.email,
				r.depth1, r.depth2, a.name_auth, m.joindate
		from sw_member m, sw_region r, sw_member_auth a
		where m.region_no = r.region_no
				and m.member_auth_no = a.member_auth_no
		order by m.joindate asc
	</select>
</mapper>